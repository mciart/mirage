# Mirage 服务器的连接地址和端口
connection_string = "mirage:443"

[authentication]
# 认证使用的用户名
username = "test"
# 认证使用的密码
password = "test"
# 信任的证书文件路径列表（服务器证书或自签名 CA）
# trusted_certificate_paths = ["examples/cert/server_cert.pem"]
# 信任的 PEM 格式证书字符串列表（可选）
# trusted_certificates = [
#     "-----BEGIN CERTIFICATE-----\n..."
# ]

[connection]
# 隧道和生成的 TUN 接口使用的 MTU
# 默认 1280（IPv6 最小 MTU，减少 TCP-over-TCP 问题）
mtu = 1280
# 开启 NODELAY
tcp_nodelay = true
# 连接超时时间（秒）
connection_timeout_s = 30
# 开启的协议优先顺序 (支持: "reality", "tcp-tls")
# 客户端将按照列表顺序尝试连接
enabled_protocols = ["reality", "tcp-tls"]
# 心跳保活间隔（秒）
keep_alive_interval_s = 25
# 并行 TCP 连接数 (1-4, 默认: 1)
# 多连接可提高带宽聚合，但占用更多资源
parallel_connections = 1
# 连接预热 (默认: false)
# 启用后在启动时预建立备用连接，减少切换延迟
warmup_connections = false
# 仅供测试：禁用 TLS 证书验证（适用于自签名证书）
# 警告：不安全！
insecure = false

[connection.obfuscation]
# 是否启用流量混淆 (默认: true)
enabled = true
# 发送随机填充包的概率 (0.0-1.0, 默认: 0.05)
# 配合加权拟态轮廓 (Weighted Traffic Mimicry)，这会触发 60% 小包 / 30% 中包 / 10% 大包的分布
padding_probability = 0.05
# 随机填充包的最小长度 (字节, 默认: 40)
padding_min = 40
# 随机填充包的最大长度 (字节, 默认: 1200)
padding_max = 1200
# Jitter (抖动) 延迟范围 (毫秒)
# 模拟网络自然波动，打乱时序特征
# 建议 0-20ms，过大会影响性能
# 最小值
jitter_min_ms = 0
# 最大值
jitter_max_ms = 0

[network]
# 需要通过隧道路由的网段列表 (CIDR 格式)
routes = [
    "10.11.12.0/24",
    "fd00::/64"
]
# 指定本地 TUN 网卡名称 (例如 "tun0" 或 "utun3")
# 不填则由系统自动分配
# interface_name = "mirage0"
# 隧道使用的 DNS 服务器
dns_servers = [
    "1.1.1.1",
    "2606:4700:4700::1111"
]

[reality]
# 目标 SNI (必须与 Server 一致)
target_sni = "www.microsoft.com"
# 客户端认证 ShortId (取列表第一个)
short_ids = ["abcd1234deadbeef"]

[log]
# 日志级别 (trace, debug, info, warn, error)
level = "info"
