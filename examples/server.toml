# 服务器实例名称（目前未用作接口名称）
name = "tun0"
# TLS 使用的证书路径 (Fallback/Standard 模式)
certificate_file = "examples/cert/server_cert.pem"
# TLS 使用的私钥路径
certificate_key_file = "examples/cert/server_key.pem"
# 隧道绑定的地址
bind_address = "::0"
# IPv4: bind_address = "0.0.0.0"
# 隧道绑定的端口
bind_port = 443
# QUIC 监听端口 (UDP)
quic_enabled = true
quic_bind_port = 443
# 隧道端点地址和分配给客户端的地址池基准地址
tunnel_network = "10.11.12.1/24"
# IPv6 隧道网络 (可选，启用双栈)
tunnel_network_v6 = "fd00::1/64"
# 申请的 TUN 设备名称（可选）
# interface_name = "tun0"
# 是否隔离客户端（客户端之间无法互相访问）
isolate_clients = true

[authentication]
# 包含用户凭据的文件路径
users_file = "examples/users"

[connection]
# 隧道和生成的 TUN 接口使用的 MTU
# 默认 1280（IPv6 最小 MTU，减少 TCP-over-TCP 问题）
mtu = 65535
# 外层隧道 MTU (UDP 包大小限制)
# 默认 1350 (兼容 PPPoE/Windows)
outer_mtu = 1350
# 开启 NODELAY
tcp_nodelay = true
# 是否复用套接字 (SO_REUSEADDR)
reuse_socket = true

[connection.obfuscation]
# 是否启用流量混淆 (默认: true)
enabled = true
# 发送随机填充包的概率 (0.0-1.0, 默认: 0.05)
# 配合加权拟态轮廓 (Weighted Traffic Mimicry)，这会触发 60% 小包 / 30% 中包 / 10% 大包的分布
padding_probability = 0.05
# 随机填充包的最小长度 (字节, 默认: 40)
padding_min = 40
# 随机填充包的最大长度 (字节, 默认: 1200)
padding_max = 1200
# Jitter (抖动) 延迟范围 (毫秒)
# 模拟网络自然波动，打乱时序特征
# 建议 0-20ms，过大会影响性能
# 最小值
jitter_min_ms = 0
# 最大值
jitter_max_ms = 0

[reality]
# 伪装的目标域名 (SNI) -> 建议选择大厂域名
target_sni = "www.microsoft.com"
# 客户端认证 ShortId 列表 (十六进制)，对应客户端配置
short_ids = [
    "abcd1234deadbeef", 
    "0011223344556677"
]

[nat]
# IPv4 出站网口 (例如 eth0)，设置后自动启用 Masquerade 和转发
# 如果留空或注释，则不进行任何自动网络配置（需手动配置 iptables）
# ipv4_interface = "eth0"

# IPv6 出站网口 (例如 eth0)，设置后自动启用 Masquerade 和转发
# 如果留空或注释，则不进行任何自动网络配置
# ipv6_interface = "eth0"

[log]
# 日志级别 (trace, debug, info, warn, error)
level = "info"
